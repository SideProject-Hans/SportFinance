@using MudBlazor

<MudDialog>
	<TitleContent>
		<MudStack Row AlignItems="AlignItems.Center" Spacing="2">
			<MudAvatar Color="@Color" Size="Size.Small" Variant="Variant.Filled">
				<MudIcon Icon="@GetIcon()" Size="Size.Small" />
			</MudAvatar>
			<MudText Typo="Typo.h6">@Title</MudText>
		</MudStack>
	</TitleContent>
	<DialogContent>
		<MudStack Spacing="3" Class="mt-2">
			<MudText Typo="Typo.body1">@ContentText</MudText>
			@if (!string.IsNullOrEmpty(WarningText))
			{
				<MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">
					@WarningText
				</MudAlert>
			}
		</MudStack>
	</DialogContent>
	<DialogActions>
		<MudButton OnClick="Cancel" Variant="Variant.Text">取消</MudButton>
		<MudButton Color="@Color" Variant="Variant.Filled" OnClick="Submit"
				   StartIcon="@GetButtonIcon()">
			@ButtonText
		</MudButton>
	</DialogActions>
</MudDialog>

@code {
	[CascadingParameter]
	private IMudDialogInstance MudDialog { get; set; } = null!;

	[Parameter]
	public string Title { get; set; } = "確認操作";

	[Parameter]
	public string ContentText { get; set; } = "確定要執行此操作嗎？";

	[Parameter]
	public string? WarningText { get; set; }

	[Parameter]
	public string ButtonText { get; set; } = "確認";

	[Parameter]
	public Color Color { get; set; } = Color.Primary;

	private string GetIcon() => Color switch
	{
		Color.Error => Icons.Material.Filled.Warning,
		Color.Warning => Icons.Material.Filled.Info,
		Color.Success => Icons.Material.Filled.CheckCircle,
		_ => Icons.Material.Filled.Help
	};

	private string GetButtonIcon() => Color switch
	{
		Color.Error => Icons.Material.Filled.DeleteForever,
		Color.Warning => Icons.Material.Filled.Warning,
		Color.Success => Icons.Material.Filled.Check,
		_ => Icons.Material.Filled.Check
	};

	private void Submit() => MudDialog.Close(DialogResult.Ok(true));
	private void Cancel() => MudDialog.Cancel();
}
