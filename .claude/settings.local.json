{

  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|MultiEdit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "branch=$(git branch --show-current 2>/dev/null); if [ \"$branch\" = \"main\" ] || [ \"$branch\" = \"master\" ]; then echo '{\"block\": true, \"message\": \"⛔ Cannot edit files on main branch. Run Phase 0 first:\\n\\n  git worktree add ../SportFinance-worktrees/<name> -b feature/xxx\\n  cd ../SportFinance-worktrees/<name>\"}' >&2; exit 2; fi",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "if [ ! -f \".tdd-test-mode\" ] && [ ! -f \".tdd-red-verified\" ]; then echo '{\"block\": true, \"message\": \"⛔ TDD Mode not active. Run Phase 2b first:\\n\\n  ./scripts/tdd-start.sh    # Start TDD (write tests)\\n  ./scripts/tdd-red.sh      # Verify tests fail\"}' >&2; exit 2; fi",
            "timeout": 5
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "Bash(dotnet build:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(dotnet test)",
      "Bash(dotnet test:*)",
      "WebSearch",
      "Bash(claude mcp list:*)",
      "Bash(claude mcp add --help:*)",
      "Bash(claude mcp add --scope user --transport stdio filesystem -- cmd /c npx -y @anthropic-ai/server-filesystem .)",
      "Bash(cmd /c npx -y @modelcontextprotocol/server-filesystem --help)",
      "Bash(npx:*)",
      "Bash(python:*)",
      "Bash(findstr:*)",
      "Bash(chcp:*)",
      "Bash(set:*)",
      "Bash(python3:*)",
      "Bash(git checkout:*)",
      "Bash(git merge:*)",
      "Bash(git branch:*)",
      "Bash(git stash:*)",
      "mcp__filesystem__list_directory",
      "mcp__filesystem__read_multiple_files",
      "Bash(git worktree:*)",
      "mcp__filesystem__directory_tree",
      "mcp__filesystem__edit_file",
      "Bash(gh repo view:*)",
      "Bash(find:*)",
      "Bash(git -C /Users/hanshuang/Documents/Github/SportFinance log --oneline -1 -- FinanceCenter/FinanceCenter/appsettings.json)",
      "Bash(/usr/bin/find:*)",
      "Bash(git push)",
      "Bash(git push:*)",
      "mcp__filesystem__read_text_file",
      "Bash(dotnet ef migrations:*)",
      "Bash(dotnet ef database update:*)",
      "Bash(dir:*)",
      "Bash(git fetch:*)",
      "Bash(git pull:*)",
      "WebFetch(domain:news.ycombinator.com)",
      "Bash(./scripts/tdd-start.sh)",
      "Bash(./scripts/tdd-red.sh)",
      "Bash(./scripts/tdd-green.sh)",
      "mcp__filesystem__write_file",
      "Bash(./scripts/tdd-start.sh:*)",
      "Bash(ls:*)",
      "Bash(./scripts/tdd-red.sh:*)",
      "Bash(dotnet:*)",
      "Bash(./scripts/tdd-green.sh:*)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "filesystem",
    "github",
    "memory",
    "sequential-thinking",
    "fetch",
    "git",
    "time"
  ]
}
